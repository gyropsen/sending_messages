{% extends 'mailing/base.html' %}
{% block content %}
<h1>
    <a href="{% url 'mailing:mailing_create' %}" type="button"
       class="btn btn-lg btn-block btn-primary">Добавить рассылку</a>
</h1>
<div class="table-responsive">
    <table class="table text-center">
        <thead>
        <tr>
            <th style="width: 22%;">Название</th>
            <th style="width: 34%;">Периодичность</th>
            <th style="width: 22%;">Статус</th>
            <th style="width: 22%;">Активна</th>
            {% if not user.is_staff %}
            <th style="width: 22%;">Информация</th>
            {% else %}
            <th style="width: 22%;">Владелец</th>
            {% endif %}
        </tr>
        </thead>
        {% for object in object_list %}
        <tbody>
        <tr>
            <td scope="row">{{object.name}}</td>
            <td scope="row">
                {% if object.periodicity == 'DAY'%}
                Раз в день
                {% elif object.periodicity == 'WEEK'%}
                Раз в неделю
                {% else %}
                Раз в месяц
                {% endif %}
            </td>
            <td scope="row">
                {% if object.status == 'CR'%}
                Создана
                {% elif object.status == 'LA'%}
                Запущена
                {% elif object.status == 'CP'%}
                Завершена
                {% else %}
                Пауза
                {% endif %}
            </td>
            <td scope="row">

                {% if object.is_active %}
                <a href="{% url 'users:mailing_set_active' object.pk %}" type="button"
                   class="btn btn-lg btn-block btn-primary">Включена</a>

                {% else %}
                <a href="{% url 'users:mailing_set_active' object.pk %}" type="button"
                   class="btn btn-lg btn-block btn-warning">Выключена</a>
                {% endif %}
            </td>
            {% if not user.is_staff %}
            <td scope="row">
                <a href="{% url 'mailing:mailing_detail' object.pk %}" type="button"
                   class="btn btn-lg btn-block btn-outline-info">Просмотреть</a>
            </td>
            {% else %}
            <td scope="row">{{object.owner}}</td>
            {% endif %}

        </tr>
        </tbody>
        {% endfor %}
    </table>
</div>

{% endblock %}