{% extends 'mailing/base.html'%}

{% block content %}
<h1>
    <a href="{% url 'mailing:message_create' %}" type="button"
       class="btn btn-lg btn-block btn-primary">Добавить сообщение</a>
</h1>

<div class="table-responsive">
    <table class="table text-center">
        <thead>
        <tr>
            <th style="width: 22%;">Тема сообщения</th>
            <th style="width: 34%;">Текст сообщения</th>
            <th style="width: 22%;">Активная рассылка</th>
            <th style="width: 22%;">Информация</th>
            {% if user.is_superuser %}
            <th style="width: 22%;">Владелец</th>
            {% endif %}
        </tr>
        </thead>
        {% for object in object_list %}
        <tbody>
        <tr>
            <td scope="row">{{object.title}}</td>
            <td scope="row">{{object.body|truncatewords:10}}</td>
            <td scope="row">
                {% if object.mailing %}
                {{object.mailing}}
                {% else %}
                Нет активной рассылки
                {% endif%}
            </td>
            <td scope="row">
                <a href="{% url 'mailing:message_detail' object.pk %}" type="button"
                   class="btn btn-lg btn-block btn-outline-info">Просмотреть</a>
            </td>
            {% if user.is_superuser %}
            <td scope="row">{{object.owner}}</td>
            {% endif %}

        </tr>
        </tbody>
        {% endfor %}
    </table>
</div>

{% endblock %}